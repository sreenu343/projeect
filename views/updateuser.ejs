<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Employee</title>
</head>
<body>

    <h1>Update Employee Details</h1>

    <form action="/updateuser/<%= employee.EmployeeID %>" method="POST">
        <label for="FirstName">First Name</label>
        <input type="text" id="FirstName" name="FirstName" value="<%= employee.FirstName %>" required><br>

        <label for="LastName">Last Name</label>
        <input type="text" id="LastName" name="LastName" value="<%= employee.LastName %>" required><br>

        <label for="Email">Email</label>
        <input type="email" id="Email" name="Email" value="<%= employee.Email %>" required><br>

        <label for="PhoneNumber">Phone Number</label>
        <input type="text" id="PhoneNumber" name="PhoneNumber" value="<%= employee.PhoneNumber %>"><br>

        <label for="DateOfLeave">Date of Leave</label>
        <!-- Checkbox to indicate if the employee has a leave date -->
        <input type="checkbox" id="leaveCheckbox" name="leaveCheckbox" 
               <%= employee.DateOfLeave ? 'checked' : '' %> 
               onclick="toggleLeaveDate()">
        <label for="leaveCheckbox">Employee has left</label><br>

        <!-- Input field for date, only enabled when the checkbox is checked -->
        <input type="date" id="DateOfLeave" name="DateOfLeave" 
               value="<%= employee.DateOfLeave || '' %>" 
               <%= employee.DateOfLeave ? '' : 'disabled' %><br>

        <label for="DepartmentName">Department</label>
        <input type="text" id="DepartmentName" name="DepartmentName" value="<%= employee.DepartmentName %>"><br>

        <label for="JobTitle">Job Title</label>
        <input type="text" id="JobTitle" name="JobTitle" value="<%= employee.JobTitle %>"><br>

        <label for="Salary">Salary</label>
        <input type="number" id="Salary" name="Salary" value="<%= employee.salary %>"><br>

        <label for="Address">Address</label>
        <input type="text" id="Address" name="Address" value="<%= employee.Address %>"><br>

        <label for="Status">Status</label>
        <select name="Status" id="Status">
            <option value="Active" <%= employee.Status === 'Active' ? 'selected' : '' %>>Active</option>
            <option value="Inactive" <%= employee.Status === 'Inactive' ? 'selected' : '' %>>Inactive</option>
        </select><br>

        <button type="submit">Update</button>
    </form>

    <script>
        // Function to toggle DateOfLeave input based on checkbox
        function toggleLeaveDate() {
            const leaveCheckbox = document.getElementById('leaveCheckbox');
            const leaveDateInput = document.getElementById('DateOfLeave');
            
            if (leaveCheckbox.checked) {
                leaveDateInput.disabled = false;
            } else {
                leaveDateInput.disabled = true;
                leaveDateInput.value = ''; // Set the field to empty when unchecked
            }
        }
    </script>

</body>
</html>
